---
layout: post
title: HTML5 forms: more accurate tests for html5test.com
permalink: e/html5formsandhtml5test
---

<h1>HTML5 forms: more accurate tests for html5test.com</h1>


<p>
<a href="http://beta.html5test.com">html5test</a> is a good test.
It's easy to understand. Neils found a good way to rate HTML5 support.
It's not perfect, but I think a perfect test is not possible if you want
to keep it simple. But there's still room for improvements.
<p>

<p>
Look at the current <a href="http://html5test.com">version of html5test</a>, the <strong>Forms</strong> part.
Webkit has a good score (34/38, 89%), although their HTML5 forms support is incomplete (no UI, validity barely implemented, but they expose the <code>input type</code>). The way forms are tested is not that accurate: 
just testing if the <code>input type</code> is supported as a DOM property is not enough.
The good way is to check that the constraint is actually applied (<code>input.validity.valid</code>).
</p>
<pre lang="javascript">
//Exemple: testing &lt;input type=email&gt;

/*
 * How it was tested
 */
var valid = (input.type == "email");


/*
 * A better way to test it
 */

input.value = "foo";
var valid = false;
if (!input.validity.valid) {
  input.value = "foo@bar.org";
    if (input.validity.valid) {
      valid = true;
    }
}
</pre>
<p>
I also added some tests for <code>input.form</code>, <code>input.labels</code> and <code>label.control</code>. I'm also testing the forms related CSS selectors (<code>:required</code>, <code>:optional</code>, <code>:valid</code> and <code>:invalid</code>).

</p>
<p>
I sent a patch to Neils. You can see the result here <a href="http://beta.html5test.com">beta.html5test.com</a>. Basically, webkit score is less good now for the forms section (29/45, 64%), but still better than Firefox4 ;) (and still very good for Opera).
</p>

<em> Firefox4 nightlies now support part of the HTML5 form specification (talk to <a href="http://twitter.com/mounirlamouri">Mounir</a>, the main developer). The latest nightly's is 24/45 (53%), and it'going to get better :)</em>
